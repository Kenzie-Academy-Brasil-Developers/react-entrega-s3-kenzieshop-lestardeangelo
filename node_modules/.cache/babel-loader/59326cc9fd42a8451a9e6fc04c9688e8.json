{"ast":null,"code":"import { addToCart, removeFromCart } from \"./actions\";\nexport const addToCartMiddler = function (product) {\n  let isRemovable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return dispatch => {\n    const list = JSON.parse(localStorage.getItem(\"cart\")) || [];\n    list.push(product);\n    const findIndex = list.findIndex(item => product.id === item.id);\n    const filter = list.filter(item => product.id === item.id);\n\n    if (findIndex === -1) {\n      localStorage.setItem(\"cart\", JSON.stringify(list));\n      isRemovable = false;\n      dispatch(addToCart(product));\n    }\n  };\n};\nexport const removeFromCartMiddler = id => (dispatch, getStore) => {\n  const {\n    cart\n  } = getStore();\n  const list = cart.filter(product => product.id !== id);\n  localStorage.setItem(\"cart\", JSON.stringify(list));\n  dispatch(removeFromCart(list));\n};\n\nfunction handleClick(productId) {\n  const findIndex = currentSale.findIndex(item => productId === item.id);\n  const filter = products.filter(item => productId === item.id);\n\n  if (findIndex === -1) {\n    setCurrentSale([...currentSale, ...filter]);\n  }\n}","map":{"version":3,"names":["addToCart","removeFromCart","addToCartMiddler","product","isRemovable","dispatch","list","JSON","parse","localStorage","getItem","push","findIndex","item","id","filter","setItem","stringify","removeFromCartMiddler","getStore","cart","handleClick","productId","currentSale","products","setCurrentSale"],"sources":["/home/lestarangelo/Kenzie Academy/M3 Atividades/Sprint III/react-entrega-s3-kenzieshop-lestardeangelo/src/store/modules/cart/middler.js"],"sourcesContent":["import { addToCart, removeFromCart } from \"./actions\"\n\nexport const addToCartMiddler = (product, isRemovable = true) => {\n\n    return (dispatch) => {\n\n      const list = JSON.parse(localStorage.getItem(\"cart\")) || []\n\n      list.push(product)\n\n      const findIndex = list.findIndex((item) => product.id === item.id)\n\n      const filter = list.filter((item) => product.id === item.id)\n\n      if(findIndex === -1){\n\n        localStorage.setItem(\"cart\", JSON.stringify(list))\n\n        isRemovable = false\n        \n        dispatch(addToCart(product))\n\n      }\n    }\n  }\n  \n  export const removeFromCartMiddler = (id) => (dispatch, getStore) => {\n\n    const { cart } = getStore()\n\n    const list = cart.filter((product) => product.id !== id)\n\n    localStorage.setItem(\"cart\", JSON.stringify(list))\n\n    dispatch(removeFromCart(list))\n\n  }\n\n  function handleClick(productId){\n\n    const findIndex = currentSale.findIndex((item) => productId === item.id)\n\n    const filter = products.filter((item) => productId === item.id)\n\n    if(findIndex === -1){\n\n      setCurrentSale([...currentSale, ...filter])\n    }\n  }"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,cAApB,QAA0C,WAA1C;AAEA,OAAO,MAAMC,gBAAgB,GAAG,UAACC,OAAD,EAAiC;EAAA,IAAvBC,WAAuB,uEAAT,IAAS;EAE7D,OAAQC,QAAD,IAAc;IAEnB,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,KAA4C,EAAzD;IAEAJ,IAAI,CAACK,IAAL,CAAUR,OAAV;IAEA,MAAMS,SAAS,GAAGN,IAAI,CAACM,SAAL,CAAgBC,IAAD,IAAUV,OAAO,CAACW,EAAR,KAAeD,IAAI,CAACC,EAA7C,CAAlB;IAEA,MAAMC,MAAM,GAAGT,IAAI,CAACS,MAAL,CAAaF,IAAD,IAAUV,OAAO,CAACW,EAAR,KAAeD,IAAI,CAACC,EAA1C,CAAf;;IAEA,IAAGF,SAAS,KAAK,CAAC,CAAlB,EAAoB;MAElBH,YAAY,CAACO,OAAb,CAAqB,MAArB,EAA6BT,IAAI,CAACU,SAAL,CAAeX,IAAf,CAA7B;MAEAF,WAAW,GAAG,KAAd;MAEAC,QAAQ,CAACL,SAAS,CAACG,OAAD,CAAV,CAAR;IAED;EACF,CAnBD;AAoBD,CAtBI;AAwBL,OAAO,MAAMe,qBAAqB,GAAIJ,EAAD,IAAQ,CAACT,QAAD,EAAWc,QAAX,KAAwB;EAEnE,MAAM;IAAEC;EAAF,IAAWD,QAAQ,EAAzB;EAEA,MAAMb,IAAI,GAAGc,IAAI,CAACL,MAAL,CAAaZ,OAAD,IAAaA,OAAO,CAACW,EAAR,KAAeA,EAAxC,CAAb;EAEAL,YAAY,CAACO,OAAb,CAAqB,MAArB,EAA6BT,IAAI,CAACU,SAAL,CAAeX,IAAf,CAA7B;EAEAD,QAAQ,CAACJ,cAAc,CAACK,IAAD,CAAf,CAAR;AAED,CAVM;;AAYP,SAASe,WAAT,CAAqBC,SAArB,EAA+B;EAE7B,MAAMV,SAAS,GAAGW,WAAW,CAACX,SAAZ,CAAuBC,IAAD,IAAUS,SAAS,KAAKT,IAAI,CAACC,EAAnD,CAAlB;EAEA,MAAMC,MAAM,GAAGS,QAAQ,CAACT,MAAT,CAAiBF,IAAD,IAAUS,SAAS,KAAKT,IAAI,CAACC,EAA7C,CAAf;;EAEA,IAAGF,SAAS,KAAK,CAAC,CAAlB,EAAoB;IAElBa,cAAc,CAAC,CAAC,GAAGF,WAAJ,EAAiB,GAAGR,MAApB,CAAD,CAAd;EACD;AACF"},"metadata":{},"sourceType":"module"}